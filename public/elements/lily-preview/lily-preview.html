<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">

<link rel="import" href="../lily-editor/lily-editor.html">
<link rel="import" href="../lily-preview/lily-preview.html">
<polymer-element name="lily-preview" attributes="source converting error">

    <template>
        <div vertical layout>
            <template if="{{!converting}}">
                <template if="{{!error && source}}">
                    <div>
                        <img src="/scores?path={{encode(source)}}"></img>
                    </div>
                </template>
                <template if="{{error}}">
                    <pre>{{error}}</pre>
                </template>
            </template>
            <template if="{{converting}}">
                <paper-spinner active></paper-spinner>
            </template>
        </div>
    </template>
        <script>
            Polymer({
                encode: function(text){
                    return encodeURI(text);
                }
            });
        </script>
</polymer-element>